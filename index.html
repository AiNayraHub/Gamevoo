<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gamevoo - Login</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
</head>
<body class="bg-slate-50 min-h-screen flex items-center justify-center p-6">
    <div class="bg-white w-full max-w-sm rounded-[40px] p-10 shadow-2xl text-center">
        <h2 class="text-3xl font-black text-blue-600 mb-2 italic">GAMEVOO</h2>
        <p class="text-gray-400 text-xs font-bold mb-8 uppercase tracking-widest">Login to your account</p>

        <div class="space-y-4">
            <input id="email" type="email" placeholder="Email Address" class="w-full p-4 bg-gray-50 rounded-2xl border outline-none focus:ring-2 focus:ring-blue-500">
            <input id="password" type="password" placeholder="Password" class="w-full p-4 bg-gray-50 rounded-2xl border outline-none focus:ring-2 focus:ring-blue-500">
            <button onclick="handleLogin()" id="login-btn" class="w-full bg-blue-600 text-white py-4 rounded-2xl font-black shadow-lg shadow-blue-100">LOGIN / SIGNUP</button>
        </div>
        <p id="msg" class="mt-4 text-xs font-bold"></p>
    </div>

    <script src="app.js"></script>
    <script>
        async function handleLogin() {
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const msg = document.getElementById('msg');
            const btn = document.getElementById('login-btn');

            if(!email || !password) return alert("Pehle details bharo!");

            btn.innerText = "Connecting...";
            
            // Login attempt
            const { data, error } = await supabaseClient.auth.signInWithPassword({ email, password });

            if (error) {
                // Agar user nahi hai toh Sign Up kardo (Auto-Register)
                const { error: signUpError } = await supabaseClient.auth.signUp({ email, password });
                if(signUpError) msg.innerText = signUpError.message;
                else msg.innerText = "Account Created! Verify email or Login.";
            } else {
                window.location.href = "home.html";
            }
            btn.innerText = "LOGIN / SIGNUP";
        }
    </script>
</body>
</html>
