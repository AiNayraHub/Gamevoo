<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Account - Gamevoo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body { background-color: #f8fafc; }
        .profile-header { background: linear-gradient(135deg, #1e40af, #3b82f6); }
        .premium-shadow { box-shadow: 0 10px 25px -5px rgba(59, 130, 246, 0.1), 0 8px 10px -6px rgba(59, 130, 246, 0.1); }
    </style>
</head>
<body class="font-sans text-slate-900 pb-28">

    <div class="profile-header pb-28 pt-10 px-6 rounded-b-[50px] text-white">
        <div class="flex items-center justify-between mb-8">
            <button onclick="location.href='home.html'" class="w-10 h-10 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-md">
                <i class="fas fa-chevron-left text-sm"></i>
            </button>
            <h1 class="font-black uppercase tracking-widest text-sm">Profile Settings</h1>
            <div class="w-10"></div>
        </div>

        <div class="flex items-center gap-5">
            <div class="w-20 h-20 bg-white/10 rounded-3xl border-2 border-white/30 flex items-center justify-center shadow-2xl overflow-hidden">
                <i class="fas fa-user-tie text-4xl"></i>
            </div>
            <div class="flex-1">
                <h2 id="p-email" class="text-xl font-black italic truncate">Fetching User...</h2>
                <div class="flex items-center gap-2 mt-1">
                    <span class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></span>
                    <p class="text-[10px] text-blue-100 font-bold uppercase tracking-tighter" id="p-uid">Connecting...</p>
                </div>
            </div>
        </div>
    </div>

    <div class="px-6 -mt-20">
        <div class="bg-white rounded-[35px] p-8 premium-shadow flex justify-between items-center mb-6 border border-blue-50">
            <div>
                <p class="text-[10px] font-black text-slate-400 uppercase tracking-widest">Available Balance</p>
                <h3 class="text-4xl font-black text-slate-800 mt-1 italic">ðŸª™ <span id="p-coins">0</span></h3>
            </div>
            <button onclick="location.href='wallet.html'" class="bg-blue-600 text-white px-6 py-3 rounded-2xl text-xs font-black shadow-lg shadow-blue-200 uppercase italic">Redeem</button>
        </div>

        <div class="bg-white rounded-[35px] p-4 premium-shadow space-y-1">
            
            <a href="https://t.me/+919559123316" target="_blank" class="flex items-center justify-between p-4 hover:bg-slate-50 rounded-3xl transition-all border-b border-slate-50">
                <div class="flex items-center gap-4">
                    <div class="w-12 h-12 bg-sky-50 text-sky-600 rounded-2xl flex items-center justify-center text-xl shadow-sm">
                        <i class="fab fa-telegram-plane"></i>
                    </div>
                    <div>
                        <p class="text-sm font-black text-slate-700 italic">Customer Support</p>
                        <p class="text-[10px] text-slate-400 font-bold uppercase">Help Desk Telegram</p>
                    </div>
                </div>
                <i class="fas fa-external-link-alt text-slate-300 text-xs"></i>
            </a>

            <a href="privacy.html" class="flex items-center justify-between p-4 hover:bg-slate-50 rounded-3xl transition-all border-b border-slate-50">
                <div class="flex items-center gap-4">
                    <div class="w-12 h-12 bg-purple-50 text-purple-600 rounded-2xl flex items-center justify-center text-xl shadow-sm">
                        <i class="fas fa-user-shield"></i>
                    </div>
                    <div>
                        <p class="text-sm font-black text-slate-700 italic">Privacy Policy</p>
                        <p class="text-[10px] text-slate-400 font-bold uppercase">Our Data Protection Rules</p>
                    </div>
                </div>
                <i class="fas fa-chevron-right text-slate-300 text-xs"></i>
            </a>

            <a href="terms.html" class="flex items-center justify-between p-4 hover:bg-slate-50 rounded-3xl transition-all border-b border-slate-50">
                <div class="flex items-center gap-4">
                    <div class="w-12 h-12 bg-orange-50 text-orange-600 rounded-2xl flex items-center justify-center text-xl shadow-sm">
                        <i class="fas fa-file-contract"></i>
                    </div>
                    <div>
                        <p class="text-sm font-black text-slate-700 italic">Terms & Conditions</p>
                        <p class="text-[10px] text-slate-400 font-bold uppercase">App Usage Guidelines</p>
                    </div>
                </div>
                <i class="fas fa-chevron-right text-slate-300 text-xs"></i>
            </a>

            <div class="flex items-center justify-between p-4 border-b border-slate-50">
                <div class="flex items-center gap-4">
                    <div class="w-12 h-12 bg-indigo-50 text-indigo-600 rounded-2xl flex items-center justify-center text-xl shadow-sm">
                        <i class="fas fa-id-badge"></i>
                    </div>
                    <div>
                        <p class="text-sm font-black text-slate-700 italic">User Secret ID</p>
                        <p id="p-full-uid" class="text-[10px] text-slate-400 font-mono">Loading UID...</p>
                    </div>
                </div>
            </div>

            <div class="flex items-center justify-between p-4">
                <div class="flex items-center gap-4">
                    <div class="w-12 h-12 bg-emerald-50 text-emerald-600 rounded-2xl flex items-center justify-center text-xl shadow-sm">
                        <i class="fas fa-check-double"></i>
                    </div>
                    <div>
                        <p class="text-sm font-black text-slate-700 italic">Verification Status</p>
                        <p class="text-[10px] text-emerald-500 font-black uppercase">Verified Member</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="mt-10 mb-5">
            <button onclick="handleLogout()" id="logout-btn" class="w-full bg-white border-2 border-red-50 text-red-500 py-5 rounded-[30px] font-black text-sm tracking-widest flex items-center justify-center gap-3 active:scale-95 transition-all shadow-sm">
                <i class="fas fa-power-off"></i> LOGOUT FROM SESSION
            </button>
            <p class="text-center text-[10px] text-slate-400 font-black mt-6 uppercase tracking-[0.3em]">Gamevoo Earning App</p>
        </div>
    </div>

    <div class="fixed bottom-0 left-0 right-0 bg-white/80 backdrop-blur-xl border-t border-slate-100 p-5 flex justify-around items-center z-50 rounded-t-[30px]">
        <button onclick="location.href='home.html'" class="text-slate-300"><i class="fas fa-home text-xl"></i></button>
        <button onclick="location.href='wallet.html'" class="text-slate-300"><i class="fas fa-wallet text-xl"></i></button>
        <button onclick="location.href='reward.html'" class="text-slate-300"><i class="fas fa-gift text-xl"></i></button>
        <button onclick="location.href='profile.html'" class="text-blue-600"><i class="fas fa-user text-xl"></i></button>
    </div>

    <script src="app.js"></script>
    <script>
        function fetchAndFillProfile() {
            if (typeof userId !== 'undefined' && userId !== null) {
                document.getElementById('p-email').innerText = userEmail || "Earning Player";
                document.getElementById('p-uid').innerText = "UID: " + userId.substring(0, 10);
                document.getElementById('p-full-uid').innerText = userId;
                document.getElementById('p-coins').innerText = coins || 0;
            } else {
                setTimeout(fetchAndFillProfile, 500);
            }
        }

        setInterval(() => {
            if(typeof coins !== 'undefined') {
                document.getElementById('p-coins').innerText = coins;
            }
        }, 1000);

        window.onload = fetchAndFillProfile;

        // Logout logic updated to English
        async function handleLogout() {
            const logoutBtn = document.getElementById('logout-btn');
            
            if(!confirm("Are you sure you want to log out from this session?")) return;

            try {
                logoutBtn.disabled = true;
                logoutBtn.innerHTML = '<i class="fas fa-spinner animate-spin"></i> DISCONNECTING...';

                const { error } = await supabaseClient.auth.signOut();
                
                if (error) throw error;

                console.log("Logged out successfully");
                window.location.replace("login.html"); 

            } catch (err) {
                alert("Logout failed: " + err.message);
                logoutBtn.disabled = false;
                logoutBtn.innerHTML = '<i class="fas fa-power-off"></i> LOGOUT FROM SESSION';
            }
        }
    </script>
</body>
                            </html>
    
